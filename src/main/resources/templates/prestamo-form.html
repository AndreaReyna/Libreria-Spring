<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Libreria</title>
  <link rel="stylesheet" th:href="@{/css/style.css}"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>


<body class="bg-dark text-white">
  <nav th:replace="fragmentos :: navbar"></nav>
      
      <div class="container main">
        <h2 th:text="${title}" class="mb-3"></h2>
        <form autocomplete="off" class="needs-validation" id="formulario" method="POST"
              novalidate th:action="@{/prestamos/__${action}__}" th:object="${prestamo}">
              <div class="form mb-3 col-xl-6">
                <input class="form-control" id="id" placeholder="id" th:field="*{id}"
                       th:readonly="${prestamo.id}"
                       type="text" style="visibility:hidden"/>
            </div>
            <div class="form mb-3 col-xl-6" th:if="${action == 'guardar'}">
              <label for="fechaDevolucion">fecha de prestamo: </label> <br>
              <input class="form-control" id="fechaPrestamo" placeholder="fechaPrestamo" required th:field="*{fechaPrestamo}"
                     type="date"/>
              <div class="invalid-feedback">la fecha de prestamo es obligatoria</div>
              </div>
            <div class="form mb-3 col-xl-6" th:if="${action != 'guardar'}">
              <label for="fechaDevolucion">fecha de devolucion: </label> <br>
              <input class="form-control" id="fechaDevolucion" placeholder="fechaDevolucion" required th:field="*{fechaDevolucion}"
                     type="date"/>
              <div class="invalid-feedback">la fecha de devolucion es obligatoria</div>
              </div>

                <div class="form mb-3 col-xl-6" th:if="${action == 'guardar'}">
                    <label for="cliente">Cliente:</label> <br>
                    <select aria-label="Elegir cliente" class="form-select" id="cliente" required th:field="*{cliente}">
                        <option selected value="">Elegir cliente</option>
                        <option class="text-dark" th:each="c : ${clientes}" th:text="|${c.nombre} ${c.apellido}|"
                         th:if=${c.alta} th:value="${c.id}"></option>
                    </select>
                    <div class="invalid-feedback">El cliente es obligatorio</div>
                </div>

                    <div class="form mb-3 col-xl-6" th:if="${action == 'guardar'}">
                        <label for="Libro">Libro:</label> <br>
                        <select aria-label="Elegir libro" class="form-select" id="libro" required th:field="*{libro}">
                            <option selected value="">Elegir libro</option>
                            <option class="text-dark" th:each="libro : ${libros}" th:text="|${libro.titulo}|"
                                    th:if=${libro.alta} th:value="${libro.id}"></option>
                        </select>
                        <div class="invalid-feedback">El libro es obligatorio</div>
                </div>

            <div class="row">
                <div class="col">
                        <button class="btn btn-success" th:text="${action == 'guardar'} ? 'Crear prestamo' : 'Guardar cambios'"
                                type="submit"></button>
                    </div>
            </div>
        </form>
        <div th:replace="fragmentos :: div-error"></div>
      </div>

    <footer th:replace="fragmentos :: footer"></footer>
      

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script>
          (() => {
          "use strict";

          const form = document.getElementById("formulario");
          form.addEventListener("submit", (event) => {
          if (!form.checkValidity()) {
          event.preventDefault();
          event.stopPropagation();
          }

          form.classList.add("was-validated");
          }, false);
          })()
</script>
</body>
</html>
